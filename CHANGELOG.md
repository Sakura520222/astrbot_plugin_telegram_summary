## 1.0.0 (2026-01-07)

### 🎉 核心功能

#### 自动总结系统
- **定时周报生成**：每周一早上9点自动生成指定Telegram频道的消息总结报告
- **智能消息抓取**：自动抓取频道消息内容，根据上次总结时间动态调整范围，避免重复总结
- **智能时间记录**：记录每次总结的时间点，下一次总结从该时间点开始获取消息
- **AI智能总结**：使用AI模型提取核心要点并整理重要消息，提高总结准确性和效率
- **多频道支持**：同时监控和总结多个Telegram频道

#### 自动推送功能
- **群组自动推送**：支持将频道总结自动推送到指定的QQ群组
- **用户自动推送**：支持将频道总结直接推送给指定的QQ用户
- **智能延迟**：推送时自动添加1-3秒随机延迟，避免触发平台风控

#### 交互式登录系统
- **聊天界面登录**：通过QQ聊天界面完成Telegram账号登录，无需命令行操作
- **会话控制流程**：支持完整的会话控制流程，引导用户逐步完成登录
- **自动Session管理**：登录成功后自动保存session文件，重启后自动加载
- **两步验证支持**：完整支持Telegram的两步验证登录流程
- **超时保护**：会话超时时间120秒，防止会话占用

#### 配置管理系统
- **AstrBot配置集成**：完全集成AstrBot框架的配置系统
- **灵活的参数配置**：支持配置多个频道、自定义提示词、AI参数等
- **时间可配置**：支持自定义自动总结执行时间（格式：`周一 09:00`）

### 🔧 管理命令

| 命令 | 功能描述 | 权限要求 |
|------|---------|---------|
| `/summary [channel]` | 立即生成本周频道消息总结，可指定频道 | 管理员 |
| `/showprompt` | 查看当前使用的提示词 | 管理员 |
| `/setprompt` | 设置自定义提示词 | 管理员 |
| `/showchannels` | 查看当前配置的频道列表 | 管理员 |
| `/addchannel <url>` | 添加新的监控频道 | 管理员 |
| `/deletechannel <url>` | 删除监控频道 | 管理员 |
| `/clearsummarytime` | 清除上次总结时间记录，恢复默认时间范围 | 管理员 |
| `/tg_login` | 开始Telegram用户账号登录流程（支持会话控制） | 管理员 |

### 🎯 核心特性

#### 智能总结
- AI驱动的消息分析与总结
- 自动提取核心要点和重要消息
- 生成包含消息链接的完整报告
- 支持自定义提示词优化总结效果

#### 安全可靠
- 完善的权限检查机制（仅管理员可使用）
- Session文件加密存储
- 完善的错误处理和恢复机制
- 详细的日志记录系统

#### 用户友好
- 清晰的命令提示和帮助信息
- 支持频道名和频道URL两种方式指定频道
- 交互式登录流程引导
- 自动处理登录异常情况

### 🛠️ 技术实现

- **框架集成**：基于AstrBot v4.x插件框架开发
- **Telegram集成**：使用Telethon库与Telegram API交互
- **AI集成**：使用AstrBot框架的AI调用机制生成总结
- **任务调度**：使用APScheduler实现定时任务
- **会话控制**：使用AstrBot的SessionController实现交互式登录
- **配置管理**：集成AstrBot配置系统，支持动态配置
- **数据持久化**：
  - 自动保存session文件和配置数据
  - 使用`last_summary_time.json`存储上次总结时间
  - 智能时间记录和读取机制，避免重复处理消息
- **消息获取优化**：根据上次总结时间动态调整消息获取范围，提高总结效率

### 📦 依赖项

- `telethon`: Telegram API客户端库
- `python-dotenv`: 环境变量加载库
- `openai`: OpenAI API客户端库
- `apscheduler`: 任务调度库

### 💡 使用建议

- 建议使用DeepSeek或其他支持长文本处理的AI模型
- 首次使用前请先通过`/tg_login`完成Telegram账号登录
- 确保Telegram账号已加入目标频道
- 首次配置后建议通过`/summary`命令手动测试
- 输入两步验证密码后建议手动撤回消息保护隐私

### 📝 注意事项

- 所有命令仅限管理员使用
- 登录信息仅用于Telegram API认证，不会上传到其他服务器
- 总结报告生成时间取决于消息量和AI模型响应速度
- 需要在AstrBot配置中正确设置Telegram API ID和Hash

